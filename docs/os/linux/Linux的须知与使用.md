## 须知

### 进程

| 列名                                                   | 含义                                                     |
| ------------------------------------------------------ | -------------------------------------------------------- |
| UID                                                    | 进程的用户信息                                           |
| <span style="color:blue;font-weight:bold;">PID</span>  | 进程id。由系统分配，不会重复。                           |
| <span style="color:blue;font-weight:bold;">PPID</span> | 父进程的id。父进程和子进程的关系是：父进程启动了子进程。 |
| <span style="color:blue;font-weight:bold;">CMD</span>  | 当前进程所对应的程序。                                   |
| C                                                      | 用整数表示的CPU使用率                                    |
| STIME                                                  | 进程启动时间                                             |
| TTY                                                    | 进程所在终端。所谓终端就是用户输入命令的操作界面。       |
| TIME                                                   | 进程所占用的CPU时间                                      |





### 一级目录简介

| 目录名       | 是否重要 | 作用                                                         |
| ------------ | -------- | ------------------------------------------------------------ |
| /bin         |          | bin是binary的缩写，这个目录存放着最经常使用的命令。          |
| /boot        |          | 这里存放的是启动Linux时用到的引导程序文件。                  |
| /dev         |          | device(设备)的缩写，该目录下存放的是Linux的外部设备。        |
| /etc         | √        | 存放系统和第三方应用程序的配置文件。                         |
| /home        | √        | 存放普通用户家目录。                                         |
| /lib和/lib64 |          | 系统开机所需要最基本的动态连接共享库。                       |
| /media       |          | 挂载Linux系统会自动识别的设备，例如U盘、光驱等。             |
| /mnt         |          | 专门用于挂载操作的目录。                                     |
| /opt         | √        | 存放安装第三方应用程序时使用的压缩包文件。                   |
| /proc        |          | 这个目录是一个虚拟的目录，它是系统内存的映射。               |
| /root        | √        | 超级管理员root用户的家目录。                                 |
| /run         |          | 存放进程产生的临时文件，关机重启后会消失。                   |
| /sbin        |          | s是Super User的意思，这里存放的是系统管理员使用的系统管理程序。 |
| /srv         |          | service缩写，该目录存放一些服务启动之后需要提取的数据。      |
| /sys         |          | 该目录下安装了2.6内核中新出现的一个文件系统sysfs。           |
| /tmp         |          | 存放临时文件。                                               |
| /usr         | √        | 应用程序的默认安装目录，类似于Windows下的program files目录。 |
| /var         | √        | 存放经常变化的内容，例如日志文件。                           |



### 权限控制

#### 基础命令

| 命令                   | 作用                           |
| ---------------------- | ------------------------------ |
| groupadd 组名          | 创建用户组                     |
| id 用户名              | 返回用户信息，检查用户是否存在 |
| useradd -g 组名 用户名 | 创建用户，同时指定所属用户组   |
| passwd 用户名          | 给用户账号设置密码             |

#### 文件权限信息

![use-linux-003](https://s2.loli.net/2022/05/18/bBnt1a5PcH6fRLZ.png)



下面介绍rwx-分别是什么意思：

- r：读

  - 读文件：查看文件内容

    例如：cat、less、tail等命令

  - 读目录：查看目录内容

    例如：使用ll命令查看目录内容

- w：写

  - 写文件：向文件中写入新内容

  - 写目录：在目录里面增删内容

    例如：在目录内新建文件、删除文件、新建目录、删除目录给目录重命名

- x：执行

  - 执行文件：把文件当作可执行文件来运行
  - 执行目录：使用cd命令进入目录

- -：无权限

由于每一位要么有权限要么没有权限，所以天然可以使用二进制来表示权限信息：

- 1：有
- 0：无

| 权限的符号表示 | 权限的二进制表示 | 权限的十进制表示 |
| -------------- | ---------------- | ---------------- |
| rwx r-x r-x    | 111 101 101      | 7 5 5            |
| rw- r-- r--    | 110 100 100      | 6 4 4            |

#### chxxx命令

| 命令名 | 作用                   |
| ------ | ---------------------- |
| chmod  | 修改权限信息           |
| chown  | 修改文件或目录的所属主 |
| chgrp  | 修改文件或目录的所属组 |



### Service

#### CentOS6

启动服务：service  服务名 start

停止服务：service  服务名 stop

重启服务：service  服务名 restart

重新加载服务：service  服务名 reload

查看服务状态：service  服务名 status

查看服务列表：chkconfig [--list]

设置具体服务开机自动启动状态：chkconfig 服务名 on/off



#### CentOS7

启动服务：systemctl start 服务名(xxxx.service)

重启服务：systemctl restart 服务名(xxxx.service)

停止服务：systemctl stop 服务名(xxxx.service)

重新加载服务：systemctl reload 服务名(xxxx.service)

查看服务状态：systemctl status 服务名(xxxx.service)

查看服务状态：systemctl list-unit-files

设置或取消服务开机自动启动：

> 设置开机自动启动：systemctl enable 服务名
>
> 取消开机自动启动：systemctl disable 服务名

##### 关闭防火墙

永久关闭防火墙

systemctl disable firewalld.service

暂时关闭防火墙

systemctl stop firewalld.service

查看防火墙开放的端口号

firewall-cmd --list-all

设置开放的服务或端口号

firewall-cmd --add-service=http --permanent

firewall-cmd --add-port=80/tcp --permanent

重启防火墙

firewall-cmd --reload



## 使用

### vim

![use-linux-001](https://s2.loli.net/2022/05/18/saNKP1DhY2MHIRe.png)



一般模式：通过按键控制VIM工作

编辑模式：可以自由输入

指令模式：通过执行指令完成一些特殊操作

#### 基本操作

| 命令                | 作用                                                         |
| ------------------- | ------------------------------------------------------------ |
| vim hello.txt       | 打开文件                                                     |
|                     |                                                              |
| i                   | 在当前位置，开始输入                                         |
| I                   | 移动到<span style="color:blue;font-weight:bold;">行的开头</span>，开始输入 |
| a                   | 光标<span style="color:blue;font-weight:bold;">向后移动一格</span>，然后开始输入 |
| A                   | 光标移动到<span style="color:blue;font-weight:bold;">行的末尾</span>，然后开始输入 |
| o                   | 在下面新增空行并输入                                         |
|                     |                                                              |
| Esc键               | 回到一般模式                                                 |
|                     |                                                              |
| set nu              | 显示行号                                                     |
| w                   | write，写入文件，保存修改                                    |
| q                   | quit，退出                                                   |
| q!                  | 不保存直接退出                                               |
|                     |                                                              |
| gg                  | 光标定位到第一行开头                                         |
| G                   | 光标定位到最后一行开头                                       |
| 数字+G              | 12G，去12行                                                  |
|                     |                                                              |
| dd                  | 删除光标所在的行                                             |
| d5d                 | 从光标所在行开始，向下连续删除5行（包括光标所在行）          |
| u                   | 撤销刚才的操作                                               |
| Ctrl+r              | 重做刚才撤销的操作                                           |
| yy                  | 复制光标所在的行                                             |
| p                   | 将当前复制的行粘贴到光标所在位置的下一行                     |
| y3y                 | 从光标所在行开始，向下连续复制5行（包括光标所在行）          |
| r                   | 替换光标所在位置的一个字符<br />第一步：按一下r键<br />第二步：输入新的字符 |
|                     |                                                              |
| /+关键词            | 搜索关键词                                                   |
| n                   | 向下找                                                       |
| N                   | 向上找                                                       |
| :noh                | 取消高亮                                                     |
|                     |                                                              |
| :%s/被替换/新内容   | 替换每行的的第一个匹配的内容 :%s/TO/to                       |
| :%s/被替换/新内容/g | 替换所有内容 :%s/TO/to                                       |
|                     |                                                              |
|                     |                                                              |
|                     |                                                              |
|                     |                                                              |
|                     |                                                              |
|                     |                                                              |



### 快捷键

| 按键         | 作用         |
| ------------ | ------------ |
| Ctrl+l       | 清屏         |
| Ctrl+c       | 强制终止程序 |
| Ctrl+Insert  | 复制         |
| Shift+Insert | 粘贴         |
| Ctrl+s       | 锁屏         |
| Ctrl+q       | 解除锁屏     |
| tab          | 自动补全     |



### Terminal

#### mkdir

对应单词：make directory

作用：创建目录

格式：mkdir [OPTION]... DIRECTORY...

创建单层目录：mkdir 新目录的路径

> 单层目录说明：
>
> mkdir aaa/bbb/ccc
>
> 其中aaa/bbb是存在的目录，要创建的仅仅是ccc

创建多层目录：mkdir -p 新目录的路径

> 多层目录说明：
>
> mkdir -p aaa/bbb/ccc/ddd
>
> 其中bbb/ccc/ddd都不存在，现在想一次性把这些目录都建出来

#### cd

对应单词：change directory

作用：切换当前目录

格式： cd 目标目录路径

用法1：使用绝对路径

用法2：使用相对路径

用法3：使用~回到家目录

#### ls

对应单词：list

作用：列出目录中的内容，这里所说的目录可以是当前目录也可以是其他目录（需要指定路径）。

格式：ls [OPTION]... [FILE]...

常用参数

| 参数 | 说明                               |
| ---- | ---------------------------------- |
| -A   | 显示目录内容时把隐藏资源也显示出来 |
| -l   | 以详细信息形式显示资源             |
| -R   | 递归查看目录内容                   |

命令的参数既可以单独使用也可以组合使用。同时ls -l可以简写为ll。

#### pwd

对应单词：print work directory

作用：打印当前所在的目录

#### touch

作用：创建空文件

格式：touch 新建文件的路径

#### cp

对应单词：copy

作用：复制文件或目录

复制文件：cp 被复制的文件的路径  目标目录的路径

复制目录：cp -r 被复制的目录的路径  目标目录的路径

#### mv

对应单词：move

作用：移动文件或目录

格式：mv 被移动的文件或目录的路径 目标目录

特殊效果：将目录或文件在当前位置移动可以起到重命名的作用

#### rm

对应单词：remove

作用：删除目录或文件

删除文件：rm 被删除的文件的路径

强制删除文件：rm -f 被删除的文件的路径

递归删除目录：rm -r 被删除的目录的路径

强制删除目录：rm -rf 被删除的目录的路径

#### cat

作用：显示文件全部内容

适用场景：较短小的文件

#### less

作用：分屏查看文件内容

##### 控制方式

| 按键    | 效果                           |
| ------- | ------------------------------ |
| 空格    | 向下滚动一屏                   |
| b       | 向上滚动一屏                   |
| 回车    | 向下滚动一行                   |
| q       | 退出                           |
| /关键词 | 搜索<br />n向下找<br />N向上找 |
| =       | 显示详细的文件信息             |

#### tail

效果：显示文件末尾的部分内容

实时查看文件末尾新增的内容，可以用来实时监控日志，使用Ctrl+c退出实时监控。

#### find

作用：查找文件或目录

用法：find 查找范围 参数 表达式

![use-linux-002](https://s2.loli.net/2022/05/18/esWV2PBNbZmFY9t.png)

#### locate

基于索引查询，速度快很多。不是实时更新的，差不多一天一更新。

更新索引库：updatedb。

#### grep

作用：将文件内容中匹配的行返回

用法：grep 参数 查找内容 源文件

例子：ps -ef | grep mysql   查找是否有mysql进程

#### tar

解压

> 最常用到的：
>
> tar -zxvf tar包路径

| 参数名称 | 作用                              |
| -------- | --------------------------------- |
| -z       | 用 gzip 对存档压缩或解压          |
| -x       | 解压                              |
| -v       | 详细显示处理的文件                |
| -f       | 指定存档或设备 (缺省为 /dev/rmt0) |

#### ps

对应单词：process status

作用：查看当前正在运行的进程

常用参数组合：

##### ps -ef

显示全部进程

-e参数：对应单词entire，表示全部。具体指显示系统中全部的进程信息。

-f参数：对应单词full-formate，表示完整格式。

##### pstree

查看整个进程树

##### ps -ef | less

分屏查看进程信息

#### kill

作用：杀死进程

说明：kill命令本质上是给进程发送信号。

使用：

1. 查看进程id
2. 根据进程id杀死进程

> kill -s kill 3325

另一种写法是

> kill -9 3325

#### top

作用：实时查看系统运行情况和健康状态。

##### ①命令与参数

| 命令名 | 更新时间间隔（秒） | 不显示任何闲置或者僵死进程 | 通过进程id监控单一进程 |
| ------ | ------------------ | -------------------------- | ---------------------- |
| top    | -d 间隔秒数        | -i                         | -p 进程id              |

##### ②操作控制

| 按键 | 功能                             |
| ---- | -------------------------------- |
| P    | 默认值，根据CPU使用率排序        |
| M    | 以内存的使用率排序               |
| N    | 以PID排序                        |
| d    | 设置数据刷新的时间间隔，单位是秒 |
| q    | 退出                             |

在top命令模式下按h键会显示如下的帮助信息：

##### ③查询结果字段解释

###### [1]第一行信息为任务队列信息

| 内容举例                      | 说明                                                         |
| ----------------------------- | ------------------------------------------------------------ |
| 12:26:49                      | 系统当前时间                                                 |
| up 1 day, 13:32               | 系统的运行时间，前面例子表示本机已经运行1天13小时32分钟      |
| 2 users                       | 当前登录了2个用户                                            |
| load average:0.00, 0.00, 0.00 | 系统在之前1分钟，5分钟，15分钟的平均负载。<br />一般认为小于1时，负载较小。如果大于1，系统已经超出负荷。 |

###### [2]第二行为进程信息

| 内容举例        | 说明                                      |
| --------------- | ----------------------------------------- |
| Tasks: 95 total | 系统中的进程总数                          |
| 1 running       | 正在运行的进程数                          |
| 94 sleeping     | 睡眠的进程                                |
| 0 stopped       | 正在停止的进程                            |
| 0 zombie        | 僵尸进程。如果不是0，需要手工检查僵尸进程 |

###### [3]第三行为CPU信息

| 内容举例      | 说明                                                         |
| ------------- | ------------------------------------------------------------ |
| Cpu(s):0.1%us | 用户空间占用的CPU百分比，us对应user                          |
| 0.1%sy        | 内核空间占用的CPU百分比，sy对应system                        |
| 0.0%ni        | 改变过优先级的进程占用的CPU百分比，ni对应niced               |
| 99.7%id       | 空闲CPU的CPU百分比                                           |
| 0.1%wa        | 等待输入/输出的进程的占用CPU百分比，wa对应IO wait            |
| 0.0%hi        | 硬中断请求服务占用的CPU百分比，hi对应hardware IRQ            |
| 0.1%si        | 软中断请求服务占用的CPU百分比，si对应software IRQ            |
| 0.0%st        | st（Steal time）虚拟时间百分比，也叫被hypervisor偷走的时间。<br />就是当有虚拟机时，虚拟CPU等待实际CPU的时间百分比。 |

###### [4]第四行为物理内存信息

| 内容举例          | 说明                   |
| ----------------- | ---------------------- |
| 2031912 total     | 物理内存的总量，单位KB |
| 70496 free        | 空闲的物理内存数量     |
| 1780676 used      | 已经使用的物理内存数量 |
| 174864 buff/cache | 作为缓冲的内存数量     |

使用中的内存总量（used）指的是现在系统内核控制的内存数，空闲内存总量（free）是还未纳入内核管控范围的数量。

纳入内核管理的内存不见得都在使用中，还包括过去使用过的现在可以被重复利用的内存，内核并不把这些可被重新使用的内存还给free，因此Linux系统运行过程中free内存会越来越少，但不影响系统运行。因为这表示更多的空闲内存被内核管理了。

###### [5]第五行为交换分区（swap）信息

| 内容举例        | 说明                                             |
| --------------- | ------------------------------------------------ |
| 2097148 total   | 交换分区（虚拟内存）的总大小                     |
| 1137824 free    | 空闲交换分区的大小                               |
| 959324 used     | 已经使用的交互分区的大小                         |
| 58640 avail Mem | 在不交换的情况下，对启动新应用程序可用内存的估计 |

交换分区是一个非常值得关注的地方，如果swap区的used数值持续发生变化那么说明在内核和交换分区之间正在持续发生数据交换，这表示内存不够用了——必须不断把内存中的数据保存到硬盘上。

#### netstat

对应单词：net status

作用：查看网络状态

常用参数：netstat -anp

| 参数名 | 作用                                             |
| ------ | ------------------------------------------------ |
| -a     | 显示所有正在或不在侦听的套接字。                 |
| -n     | 显示数字形式地址而不是去解析主机、端口或用户名。 |
| -p     | 显示套接字所属进程的PID和名称。                  |

##### 使用技巧

###### ①分屏查看

> netstat -anp | less

###### ②根据进程名称查看网络状态

> netstat -anp | grep sshd

###### ③根据端口号查看网络状态

> netstat -anp | grep :22

这里需要注意一下，端口号本身就是一串数字，进程id也是一串数字。那么根据端口号匹配时，很多无关的进程id也会被匹配到，造成大量不必要的干扰。此时给端口号数字前加上冒号就好多了。

#### history

作用：查看命令历史

将命令的运行结果写入文件：

- 覆盖写：命令 > 文件路径
- 追加写：命令 >> 文件路径

#### echo

作用：将数据输出到standard output（标准输出），主要用来打印环境变量的值

```bash
echo $PATH
# /opt/jdk1.8.0_121/bin:/usr/local/bin:/usr/local/sbin:/usr/bin:/usr/sbin:/bin:/sbin:/root/bin
# : 为分隔符
```

#### man

对应单词：manual

格式：man [要查询的命令]

| 按键    | 说明                                 |
| ------- | ------------------------------------ |
| 空格    | 向下滚动一屏                         |
| 回车    | 向下滚动一行                         |
| b       | 向上滚动一屏                         |
| q       | 退出                                 |
| /关键词 | 搜索关键词<br />n向下找<br />N向上找 |

#### info

对应单词：information

格式：info [要查询的命令]

控制方式：

| 按键 | 说明                           |
| ---- | ------------------------------ |
| Up   | Move up one line               |
| Down | Move down one line             |
| DEL  | Scroll backward one screenful  |
| SPC  | Scroll forward one screenful   |
| PgUp | Scroll backward in this window |
| PgDn | Scroll forward in this window  |

> 其实info命令每次进入的都是同一个文档，只是不同被查询命令进入的是这个文档的不同位置而已。

#### wget

作用：下载文件 

#### zip & unzip

1.zip命令
zip -r myfile.zip ./*
将当前目录下的所有文件和文件夹全部压缩成myfile.zip文件,－r表示递归压缩子目录下所有文件.

2.unzip命令
unzip -o -d /home/sunny myfile.zip
把myfile.zip文件解压到 /home/sunny/
-o:不提示的情况下覆盖文件；
-d:-d /home/sunny 指明将文件解压缩到/home/sunny目录下；

3.其他
zip -d myfile.zip smart.txt
删除压缩文件中smart.txt文件
zip -m myfile.zip ./rpm_info.txt
向压缩文件中myfile.zip中添加rpm_info.txt文件
\-------------------------------------------------------------------------------


要使用 zip 来压缩文件，在 shell 提示下键入下面的命令：

zip -r filename.zip filesdir
在这个例子里，filename.zip 代表你创建的文件，filesdir 代表你想放置新 zip 文件的目录。-r 选项指定你想递归地（recursively）包括所有包括在 filesdir 目录中的文件。
要抽取 zip 文件的内容，键入以下命令：
unzip filename.zip

你可以使用 zip 命令同时处理多个文件和目录，方法是将它们逐一列出，并用空格间隔：

zip -r filename.zip file1 file2 file3 /usr/work/school 
上面的命令把 file1、file2、 file3、以及 /usr/work/school 目录的内容（假设这个目录存在）压缩起来，然后放入 filename.zip 文件中。

关机

shutdown -h now 立刻关机

参考教程：

[Linux下的压缩（zip）解压(unzip)缩命令](https://blog.csdn.net/shenyunsese/article/details/17556089)
